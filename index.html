<script>
    function entra() {
        const val = document.getElementById('code').value;
        if(val.length === 6) {
            document.getElementById('login').style.display = 'none';
            document.getElementById('loading-screen').style.display = 'flex';
            
            // Diamo tempo al browser di mostrare la barra prima di caricare il motore pesante
            setTimeout(() => {
                const s = document.createElement('script');
                s.type = 'module';
                s.src = './game.js';
                document.body.appendChild(s);
            }, 500);
        } else { alert("Codice non valido!"); }
    }

    window.updateLoadingBar = function(progress, text) {
        const bar = document.getElementById('loading-bar');
        const txt = document.getElementById('loading-text');
        if(bar) bar.style.width = progress + '%';
        if(txt) txt.innerText = text;

        if (progress >= 100) {
            setTimeout(() => {
                document.getElementById('loading-screen').style.display = 'none';
                document.getElementById('gui').style.display = 'block';
            }, 500);
        }
    };
</script>