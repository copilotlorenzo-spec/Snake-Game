<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Lollocraft</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; font-family: 'Press Start 2P', cursive; color: white; overflow: hidden; }
        #ui-layer { position: fixed; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; z-index: 10; }
        .box { background: #222; padding: 30px; border: 4px solid #555; text-align: center; }
        input { padding: 10px; margin: 10px; background: #000; color: #0f0; border: 2px solid #555; font-family: 'Press Start 2P'; }
        button { padding: 15px; background: #3c8527; color: #fff; border: none; cursor: pointer; font-family: 'Press Start 2P'; }
        #loader { display: none; flex-direction: column; align-items: center; }
        .bar-bg { width: 300px; height: 20px; background: #333; border: 2px solid #fff; margin-top: 10px; }
        #bar-fill { width: 0%; height: 100%; background: #55FF55; }
        #gui { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; pointer-events: none; display: none; font-size: 20px; }
    </style>
</head>
<body>
    <div id="ui-layer">
        <div id="login" class="box">
            <h2>LOLLOCRAFT</h2>
            <input type="password" id="pw" maxlength="6" placeholder="CODICE">
            <br>
            <button onclick="avvia()">ENTRA NEL MONDO</button>
        </div>
        <div id="loader">
            <h3>CARICAMENTO...</h3>
            <div class="bar-bg"><div id="bar-fill"></div></div>
        </div>
    </div>
    <div id="gui">+</div>

    <script>
        function avvia() {
            if(document.getElementById('pw').value.length === 6) {
                document.getElementById('login').style.display = 'none';
                document.getElementById('loader').style.display = 'flex';
                const s = document.createElement('script');
                s.type = 'module';
                s.src = './game.js';
                document.body.appendChild(s);
            } else { alert("Codice errato!"); }
        }
        window.setLoad = (p) => { 
            document.getElementById('bar-fill').style.width = p + '%';
            if(p >= 100) {
                document.getElementById('ui-layer').style.display = 'none';
                document.getElementById('gui').style.display = 'block';
            }
        };
    </script>
</body>
</html>